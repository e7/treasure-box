<form class="form-horizontal">
  <div class="form-group">
    <div class="col-md-12">
      <input type="email" class="form-control" id="inputEmail3" placeholder="帐号">
    </div>
  </div>
  <div class="form-group">
    <div class="col-md-12">
      <input type="password" class="form-control" id="inputPassword3" placeholder="密码">
    </div>
  </div>
  <div class="form-group">
    <div class="col-md-12">
      <input type="text" class="form-control" id="inputVerifyCode" placeholder="验证码">
    </div>
  </div>
  <div class="form-group">
    <div class="col-md-offset-4 col-md-8">
      <img id="img_verify_code" src="http://127.0.0.1:8080/tiny_chest/servlets/verify_code.png" alt="看不情？点击换一张" class="img-thumbnail" style="cursor:pointer">
    </div>
  </div>
  <div class="form-group">
    <div class="col-md-offset-8 col-md-4">
      <button id="act-login" type="button" class="btn btn-default">登录</button>
    </div>
  </div>
</form>

<a id="ui-register" style="cursor:pointer">还没有帐号？</a>

<script>
  var init = function () {
    var MAGICNUM = 308546259;
    $("#ui-form-title").html("登录");

    // 刷新验证码
      $("#img_verify_code").click(function(event) {
        $(this).attr("src", "http://127.0.0.1:8080/tiny_chest/servlets/verify_code.png?rand="
          + parseInt(Math.random() * MAGICNUM));
      });

    // 还没有帐号？
    $("#ui-register").on("click", function () {
      $.get("ui/form-register.html", function(result) {
        $("#ui-form-body").html(result);
      });
    });

    // 登录按钮
    $("#act-login").on("click", function () {
      $.post("http://127.0.0.1:8008/login",
             {username: "lijia", password: "111"}, function (data) {
        console.log(data);
        if ("200" == data.result) {
          $.cookie("sessionid", data.data.sessionid, {
            expires: 1, path: "/", domain: "127.0.0.1", secure: false
          });

          $.get("ui/header-user.html", function(result) {
            $("#ui-header").html(result);
          });

          $.get("ui/pswd-table.html", function(result) {
            $("#ui-body").html(result);
          });

          return;
        }
      }, "json");
    });
  };

  init();
</script>
